<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<include file="Index/header" />
<div id="main" >
<div class="place">
    <span>位置：</span>
    <ul class="placeul">
        <li><a href="#">首页</a></li>
        <li><a href="#">权限管理</a></li>
        <li><a href="#">角色管理</a></li>
    </ul>
</div>

<div class="rightinfo">

    <div class="tools">

        <ul class="toolbar">
            <li class="add_btn"><span><img src="{:C('STATIC_URL')}/images/t01.png"/></span>添加</li>
            <li class="click"><span><img src="{:C('STATIC_URL')}/images/t02.png"/></span>修改</li>
            <li><span><img src="{:C('STATIC_URL')}/images/t03.png"/></span>删除</li>
            <li><span><img src="{:C('STATIC_URL')}/images/t04.png"/></span>统计</li>
        </ul>


        <ul class="toolbar1">
            <li><span><img src="{:C('STATIC_URL')}/images/t05.png"/></span>设置</li>
        </ul>

    </div>


    <table class="tablelist">
        <thead>
        <tr>
            <th>ID</th>
            <th>角色名</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        <volist name="list" id="vo">
            <tr>
                <td>{$vo.id}</td>
                <td>{$vo.name}</td>
                <td><a href="{:U('Permission/addAccess')}?id={$vo.id}" class="tablelink">分配权限</a> <a href="javascript:;" class="tablelink">修改</a> <a href="javascript:;" class="tablelink"> 删除</a></td>
            </tr>
        </volist>
        </tbody>
    </table>


    <div id="add_temp" style="display: none">
        <ul class="forminfo">
            <li><label>角色名</label><input name="title" type="text" class="dfinput input_role_name" style="width: 300px" /></li>
            <li><label>&nbsp;</label><input name="submit" type="button" class="btn add_role_btn" value="确认保存"/></li>
        </ul>
    </div>


</div>
</div>
<script>
    $(function () {
        var layer_index;
        $(document).on('click', '.add_btn', function () {
            layer_index = layer.open({
                type: 1,
                title: '添加角色',
                skin: 'layui-layer-rim', //加上边框
                //area: ['420px', '240px'], //宽高
                content: $('#add_temp').html()
            });
        });
        $(document).on('click', '.add_role_btn', function () {
            var rolename = $('#layui-layer'+layer_index).find('.input_role_name').val();
            if (rolename == '') {
                layer.msg('请输入正确的角色名', {icon: 2,time: 1000});
                return false;
            }
            $.ajax({
                type:'post',
                dataType:'json',
                data:{rolename:rolename},
                url:"{:U('Permission/addRole')}",
                success:function (response) {
                    if (response.code == 1) {
                        layer.msg('添加成功', {
                            icon: 1,
                            time: 1000
                        }, function(){
                            location.reload();
                        });
                    }else {
                        layer.msg(response.msg, {
                            icon: 2,
                            time: 1000
                        });
                    }
                }
            });
        });
    });
</script>
<include file="Index/footer" />
